분산 트랜잭션(Distributed Transaction)은 **여러 독립적인 시스템이나 데이터베이스**에 걸쳐 수행되는 트랜잭션입니다. 즉, 하나의 트랜잭션이 여러 노드(서버, 데이터베이스, 서비스 등)에 분산된 데이터를 동시에 업데이트하거나 조작해야 하는 경우를 말합니다. 이러한 트랜잭션은 **일관성(Consistency)**, **원자성(Atomicity)**, **격리성(Isolation)**, **지속성(Durability)**, 즉 ACID 특성을 보장해야 합니다.

### 주요 특징
1. **분산 시스템**: 트랜잭션이 단일 데이터베이스가 아닌, 네트워크로 연결된 여러 시스템(예: 마이크로서비스, 분산 데이터베이스)에서 실행됩니다.
2. **코디네이션 필요**: 트랜잭션의 성공 또는 실패를 보장하기 위해 **코디네이터**(Coordinator)가 모든 참여 노드 간의 작업을 조율합니다.
3. **2PC (Two-Phase Commit)**: 가장 일반적인 분산 트랜잭션 프로토콜로, 준비 단계(Prepare Phase)와 커밋 단계(Commit Phase)를 통해 모든 노드가 동기화된 상태로 트랜잭션을 완료합니다.
4. **복잡성과 성능**: 네트워크 지연, 노드 실패, 동기화 문제 등으로 인해 단일 시스템 트랜잭션보다 구현이 복잡하고 성능이 느릴 수 있습니다.

### 예시
- 은행 시스템에서 계좌 A(한 데이터베이스)에서 계좌 B(다른 데이터베이스)로 돈을 이체하는 경우.
- 마이크로서비스 아키텍처에서 주문 서비스와 결제 서비스가 각각의 데이터베이스를 업데이트해야 하는 경우.

### 문제점 및 대안
- **문제점**: 
  - 네트워크 장애나 노드 실패로 인해 트랜잭션이 중단될 가능성.
  - 2PC는 모든 노드가 동의해야 하므로 성능 병목현상이 발생할 수 있음.
- **대안**:
  - **사가 패턴(Saga Pattern)**: 트랜잭션을 작은 단위로 나누어 순차적으로 실행하며, 실패 시 보상 트랜잭션(Compensating Transaction)을 통해 롤백.
  - **이벤트 소싱(Event Sourcing)**: 상태 변경을 이벤트로 기록해 시스템 간 일관성을 유지.
  - **CQRS**: 명령(Command)과 쿼리(Query)를 분리해 복잡성을 줄임.

분산 트랜잭션은 현대 분산 시스템(예: 클라우드, 마이크로서비스)에서 필수적이지만, 설계와 구현이 까다롭기 때문에 적절한 패턴과 도구를 선택하는 것이 중요합니다. 추가로 궁금한 점이 있으면 말씀해주세요!

# 
https://junhyunny.github.io/msa/design-pattern/distributed-transaction/